\input{ccd}
\input{ccdnew}

\newcommand{\pe}{\plain{e}}

\begin{align*}
\semm{v}            &= \valEnvLook{v} \\
\semm{\Abs{v}{e}}   &= \set{(\elist,\closure[\valEnv]{v}{e})} \\
\semm{\App{e}{e'}}  &= \semm{e} \compS \semm{e'} \\
\semm{\LetIn{v}{e}{e'}} &= \semm{\Abs{v}{e'}} \compS \semm{\App{Y}{(\Abs{v}{e})}} \\
  &\qquad\text{ where } Y = 
   \Abs{r}{\App{(\Abs{x}{\App{r}{(\App{x}{x})}})}{(\Abs{x}{\App{r}{(\App{x}{x})}})}} \\
\semm{\ShrIn{v}{e}{e'}} &= 
   \set{(\qb\qb',\pe')\ |\     \\ &\qquad
        (\qb,\pe)\in\semm{e},\ \\ &\qquad
        (\qb',\pe')\in\set{(\elist,\closure[\valEnv]{v}{e'})}\compS\set{(\elist,\pe)}} \\
\semm{\tr{}}        &= \set{(\elist,\tr{})}  \\
\semm{\tr{e^n}}     &= \set{(\qb^n,\tr{e'^n})\ |\ ((\qb_i,e'_i)\in\semm{e_i})^{i:1..n}} \\
\semm{\DimIn{t^n}{e}} &= 
    \{(\dimMeta.t_i\qb,e')\ |\  i\in\intSet{n}, (\qb,e')\in\semm{\tsel{e}} \}
\end{align*}